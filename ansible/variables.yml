# ansible-playbook host.yml --extra-vars "variable_host=test"
# Override hosts variable of Ansible playbook from the command line
# From <https://stackoverflow.com/questions/33222641/override-hosts-variable-of-ansible-playbook-from-the-command-line> 

# ansible-playbook variables.yml --extra-vars "version=1.23.45 other_variable=foo"
# ansible-playbook variables.yml -e firstvar=false -e second_var=value2
# From <https://stackoverflow.com/questions/30662069/how-can-i-pass-variable-to-ansible-playbook-in-the-command-line>

---
- hosts: "{{ variable_host | default('localhost') }}"
  gather_facts: no
  vars:
    my_version: "{{ version }}"
    my_other_variable: "{{ other_variable }}"

    # From <https://stackoverflow.com/questions/21422158/ansible-accessing-local-environment-variables> 
    path: "{{ lookup('env', 'PATH') }}"
    home: "{{ lookup('env', 'HOME') }}"
    
  tasks:
  - name: ping
    ping:

  # Special Variables
  # From <https://docs.ansible.com/ansible/latest/reference_appendices/special_variables.html>
  - debug: var=inventory_hostname # The inventory name for the ‘current’ host being iterated over in the play
  - debug: var=ansible_play_batch # List of active hosts in the current play run limited by the serial, aka ‘batch’. Failed/Unreachable hosts are not considered ‘active’.
  - debug: var=ansible_play_hosts_all # List of all the hosts that were targeted by the play
  - debug: var=ansible_version # List of all the hosts that were targeted by the play
  - debug: var=ansible_user # The user Ansible ‘logs in’ as
  - debug: var=ansible_host # The ip/name of the target host to use instead of inventory_hostname
  - debug: var=ansible_connection # The connection plugin actually used for the task on the target host
  - debug: var=ansible_playbook_python # The path to the python interpreter being used by Ansible on the controller
  - debug: var=ansible_python_interpreter # The path to the Python executable Ansible should use on the target host

  - debug: var=home
  - debug: var=path

  # Get current target host's IP address
  # https://stackoverflow.com/questions/39819378/ansible-get-current-target-hosts-ip-address
  - debug: var=ansible_ssh_host


  - debug: var=version
  - debug: var=other_variable

  - shell: "echo {{ firstvar }}"
    register: result1
  - debug: var=result1.stdout_lines
  - shell: "echo {{ second_var }}"
    register: result2
  - debug: var=result2.stdout_lines